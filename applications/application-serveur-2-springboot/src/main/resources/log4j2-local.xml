<?xml version="1.0" encoding="UTF-8"?>
<Configuration monitorInterval="5"> <!-- prise en compte des modifications à chaud au bout de 5 secondes -->
    <Properties>
		<!-- Propriétés surchargeables par le CEI indiquant le chemin vers le dossier contenant les logs et le nom du fichier de log -->
        <property name="dossierLog">./logs</property>
        <property name="nomFichierLog">formation-api-rest</property>
        
        <property name="LOG_PATTERN">
            %d{yyyy-MM-dd HH:mm:ss.SSS} %highlight{${LOG_LEVEL_PATTERN:-%5p}}{FATAL=red, ERROR=red, WARN=yellow, INFO=green, DEBUG=green, TRACE=green} %style{${sys:PID}}{magenta} --- [%15.15t] %style{%-40.40c{1.}}{cyan} : %m%n%ex
        </property>
        <property name="UNICOLOR_PATTERN">
            %highlight{%d{yyyy-MM-dd HH:mm:ss.SSS} %-5level [%15.15t] %-40.40C{1.} - %msg%n%throwable}{FATAL=red blink, ERROR=red, WARN=yellow bold, INFO=white, DEBUG=green bold, TRACE=blue}
        </property>
    </Properties>
    <Appenders>
        <Console name="Console" target="SYSTEM_OUT">
            <PatternLayout pattern="${UNICOLOR_PATTERN}" />
        </Console>
 
        <RollingFile name="RollingFile"
            fileName="${dossierLog}/${nomFichierLog}.log"
            filePattern="${dossierLog}/${nomFichierLog}-%d{yyyy-MM-dd}-%i.log">
            <PatternLayout>
                <pattern>${UNICOLOR_PATTERN}</pattern>
            </PatternLayout>
            <Policies>
                <!-- rollover daily and when the file reaches 10 MegaBytes -->
                <SizeBasedTriggeringPolicy size="10 MB" />
                <TimeBasedTriggeringPolicy />
            </Policies>
			<!-- permet de dire combien de fichier au maximum seront crée pour un même pattern (avec le %i) -->
            <DefaultRolloverStrategy max="90" />
        </RollingFile>
    </Appenders>
 
    <Loggers>
        <!-- LOG everything at INFO level -->
        <Root level="info">
            <AppenderRef ref="Console" />
            <AppenderRef ref="RollingFile" />
        </Root>
        <!-- LOG "com.example" at TRACE level -->
        <Logger name="fr.insee" level="trace"></Logger>
    </Loggers>
 
</Configuration>
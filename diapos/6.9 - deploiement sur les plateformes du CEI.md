# Spring Boot : Déploiement sur les plateformes du CEI

----

## WAR pour les plateformes dev/qf au CEI (1)

- nommer le livrable ROOT
- utiliser **maven-war-plugin** pour créer le war à la place de **spring-boot-maven-plugin**
- exécuter le goal maven **clean install application-serveur-2-springboot** avec le profil **dev** pour prendre en compte le profil dev

----

## WAR pour les plateformes dev/qf au CEI (2)

```xml
<packaging>war</packaging>

<build>
	<!-- permet le filtrage des properties afin de sélectionner le bon fichier suivant le profil -->
	<resources>
		<resource>
			<directory>src/main/resources</directory>
			<filtering>true</filtering>
		</resource>
	</resources>
	<!-->définit le nom du WAR< -->
	<finalName>ROOT</finalName>
	<plugins>
		<plugin>
			<groupId>org.apache.maven.plugins</groupId>
			<artifactId>maven-war-plugin</artifactId>
			<configuration>
				<warName>ROOT</warName>
				<failOnMissingWebXml>false</failOnMissingWebXml>
			</configuration>
		</plugin>
	</plugins>
</build>
```

----

## ZIP pour les plateformes de prod au CEI (1)

- création d'un profil prod (fichier de properties nommé différemment pour ne pas qu'il soit chargé dans le WAR)
- utiliser **maven-assembly-plugin** pour créer un zip contenant le war, les properties, le fichier de config de log4j2, le changelog...
- properties pour la prod en dehors du WAR pour que le CEI puisse les surcharger : ajout dans le main de l'application du chemin attendu du fichier
```java
// spécificaiton du chemin et du nom du fichier de properties de prod

```

----

## ZIP pour les plateformes de prod au CEI (2)

Fichier *formationapirest.properties*
```bash

```

----

## ZIP pour les plateformes de prod au CEI (3)

Fichiere assembly
```xml

```
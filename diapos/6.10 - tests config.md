# Configuration pour les tests

----

## Maven Surefire

- lacement des tests avec les classes finissant par `Test`
- exécution dans la phase `test` de maven

```xml
<!-- permet de lancer les tests unitaires en UTF-8 -->
<plugin>
	<groupId>org.apache.maven.plugins</groupId>
	<artifactId>maven-surefire-plugin</artifactId>
	<configuration>
		<!-- permet la surcharge du plugin tout en fonctionnant avec jacoco -->
		<argLine>@{argLine} -Dfile.encoding=UTF-8</argLine>
	</configuration>
</plugin>
```

----

## Maven Failsafe

- lacement des tests avec les classes finissant par `IT`
- exécution dans la phase `verify` de maven

```xml
<!-- permet de lancer les tests d'intégration en UTF-8 -->
<plugin>
	<groupId>org.apache.maven.plugins</groupId>
	<artifactId>maven-failsafe-plugin</artifactId>
	<configuration>
		<argLine>@{argLine} -Dfile.encoding=UTF-8</argLine>
	</configuration>
</plugin>
``` 

----


## Jacoco

```xml
<!-- génère un rapport sur la couverture de tests -->
<plugin>
	<groupId>org.jacoco</groupId>
	<artifactId>jacoco-maven-plugin</artifactId>
	<version>0.8.8</version>
	<executions>
		<execution>
			<id>default-prepare-agent</id>
			<goals>
				<goal>prepare-agent</goal>
			</goals>
		</execution>
		<execution>
			<id>default-report</id>
			<phase>verify</phase>
			<goals>
				<goal>report</goal>
			</goals>
		</execution>
	</executions>
</plugin>
```
